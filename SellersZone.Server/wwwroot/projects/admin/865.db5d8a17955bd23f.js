"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[865],{4179:(F,C,a)=>{a.d(C,{b:()=>m});var d=a(1635),e=a(4438),p=a(177),D=a(3487),u=a(9417),h=a(152),x=a(3294),M=a(6640),v=a(3111),f=a(6911),R=a(3344),b=a(3921),T=a(6983),P=a(1825),O=a(4484),B=a(3955);const j=["deleteModal"];function A(i,l){1&i&&(e.j41(0,"div",15),e.nrm(1,"app-loader",16),e.k0s()),2&i&&(e.R7$(),e.Y8G("loaderClass","custom-loader-wrapper"))}function G(i,l){if(1&i){const n=e.RV6();e.j41(0,"div",27)(1,"a",28),e.nrm(2,"i",29),e.k0s(),e.j41(3,"ul",30)(4,"a",31),e.bIt("click",function(){e.eBV(n);const c=e.XpG(2).$implicit,g=e.XpG(3);return e.Njj(g.DeleteModal.openModal("delete",c))}),e.nrm(5,"i",32),e.EFF(6),e.nI1(7,"translate"),e.k0s()()()}2&i&&(e.R7$(6),e.SpI(" ",e.bMT(7,1,"delete")," "))}function $(i,l){if(1&i&&(e.qex(0),e.DNE(1,G,8,3,"div",26),e.bVm()),2&i){const n=e.XpG(4);e.R7$(),e.Y8G("ngIf",n.deleteAction)}}function o(i,l){if(1&i){const n=e.RV6();e.j41(0,"div")(1,"div",20)(2,"input",21),e.bIt("change",function(c){const g=e.eBV(n).$implicit,I=e.XpG(3);return e.Njj(I.selectImage(c,g,I.url))}),e.k0s(),e.j41(3,"label",22)(4,"div",23),e.nrm(5,"img",24),e.k0s()(),e.DNE(6,$,2,1,"ng-container",25),e.k0s()()}if(2&i){const n=l.$implicit,_=e.XpG(3);e.R7$(2),e.FS9("type",_.multiple?"checkbox":"radio"),e.Mz_("id","attachment-",null==n?null:n.id,""),e.Y8G("value",null==n?null:n.id),e.R7$(),e.Mz_("for","attachment-",null==n?null:n.id,""),e.R7$(2),e.Y8G("src",n.original_url,e.B4B),e.R7$(),e.Y8G("hasPermission","attachment.destroy")}}function E(i,l){if(1&i&&(e.j41(0,"div",18),e.DNE(1,o,7,8,"div",19),e.nI1(2,"async"),e.k0s()),2&i){let n;const _=e.XpG(2);e.R7$(),e.Y8G("ngForOf",null==(n=e.bMT(2,1,_.attachment$))?null:n.data)}}function t(i,l){if(1&i&&(e.DNE(0,E,3,3,"div",17),e.nI1(1,"async")),2&i){let n;const _=e.XpG();e.Y8G("ngIf",null==(n=e.bMT(1,1,_.attachment$))||null==n.data?null:n.data.length)}}function s(i,l){if(1&i){const n=e.RV6();e.j41(0,"nav",33)(1,"app-pagination",34),e.bIt("setPage",function(c){e.eBV(n);const g=e.XpG();return e.Njj(g.setPaginate(c))}),e.k0s()()}if(2&i){const n=e.XpG();e.R7$(),e.Y8G("total",n.totalItems)("currentPage",n.filter.page)("pageSize",n.filter.paginate)}}function r(i,l){1&i&&e.nrm(0,"app-no-data",35),2&i&&e.Y8G("image","assets/svg/no-media.svg")("text","No Media Found")}class m{constructor(l,n,_){this.store=l,this.document=n,this.renderer=_,this.selectedImages=[],this.multiple=!1,this.url=!1,this.loading=!0,this.deleteAction=!0,this.setImage=new e.bkB,this.setDeleteImage=new e.bkB,this.term=new u.MJ,this.filter={search:"",field:"",sort:"",page:1,paginate:48},this.totalItems=0,this.attachment$.subscribe(c=>this.totalItems=c?.total),this.getAttachments(this.filter,!0),this.term.valueChanges.pipe((0,h.B)(400),(0,x.F)()).subscribe(c=>{this.filter.search=c,this.getAttachments(this.filter)})}getAttachments(l,n){this.loading=!0,this.store.dispatch(new v.F$(l)).subscribe({complete:()=>{this.loading=!1}}),n||this.renderer.addClass(this.document.body,"loader-none")}onMediaChange(l){this.filter.sort=l.target.value,this.getAttachments(this.filter)}onActionClicked(l,n){"delete"==l&&this.store.dispatch(new v.$4(n.id)).subscribe({complete:()=>{this.setDeleteImage.emit(n.id)}})}selectImage(l,n,_){if(this.multiple){const c=this.selectedImages.indexOf(n);l.target.checked?-1==c&&this.selectedImages.push(n):this.selectedImages=this.selectedImages.filter(g=>g.id!=parseInt(l.target.value))}else this.selectedImages=n;_&&(this.selectedImages=n),this.setImage.emit(this.selectedImages)}setPaginate(l){this.filter.page=l,this.getAttachments(this.filter)}ngOnDestroy(){this.renderer.removeClass(this.document.body,"loader-none")}static{this.\u0275fac=function(n){return new(n||m)(e.rXU(D.il),e.rXU(p.qQ),e.rXU(e.sFG))}}static{this.\u0275cmp=e.VBU({type:m,selectors:[["app-media-box"]],viewQuery:function(n,_){if(1&n&&e.GBs(j,5),2&n){let c;e.mGM(c=e.lsd())&&(_.DeleteModal=c.first)}},inputs:{selectedImages:"selectedImages",multiple:"multiple",url:"url",loading:"loading",deleteAction:"deleteAction"},outputs:{setImage:"setImage",setDeleteImage:"setDeleteImage"},decls:30,vars:27,consts:[["mediaContent",""],["deleteModal",""],[1,"select-top-panel"],["type","text",1,"form-control",3,"placeholder","formControl"],[1,"form-select",3,"change"],["value",""],["value","newest"],["value","oldest"],["value","smallest"],["value","largest"],[1,"content-section","select-file-section","py-0","ratio2_3","custom-box-loader"],["class","box-loader",4,"ngIf","ngIfElse"],["class","custom-pagination",4,"ngIf"],[3,"image","text",4,"ngIf"],[3,"deleteItem"],[1,"box-loader"],[3,"loaderClass"],["class","row row-cols-xxl-6 row-cols-xl-5 row-cols-lg-4 row-cols-sm-3 row-cols-2 g-sm-3 g-2 media-library-sec ratio_square",4,"ngIf"],[1,"row","row-cols-xxl-6","row-cols-xl-5","row-cols-lg-4","row-cols-sm-3","row-cols-2","g-sm-3","g-2","media-library-sec","ratio_square"],[4,"ngFor","ngForOf"],[1,"library-box"],["name","attachment",1,"media-checkbox",3,"change","type","value","id"],[3,"for"],[1,"ratio","ratio-1x1"],["alt","attachment",1,"img-fluid",3,"src"],[4,"hasPermission"],["ngbDropdown","","class","dropdown",4,"ngIf"],["ngbDropdown","",1,"dropdown"],["href","javascript:void(0)","ngbDropdownToggle",""],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["ngbDropdownItem","",1,"d-flex","align-items-center",3,"click"],[1,"ri-delete-bin-line","me-2"],[1,"custom-pagination"],[3,"setPage","total","currentPage","pageSize"],[3,"image","text"]],template:function(n,_){if(1&n){const c=e.RV6();e.j41(0,"div",2)(1,"div"),e.nrm(2,"input",3),e.nI1(3,"translate"),e.k0s(),e.j41(4,"select",4),e.bIt("change",function(I){return e.eBV(c),e.Njj(_.onMediaChange(I))}),e.j41(5,"option",5),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"option",6),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.j41(11,"option",7),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"option",8),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"option",9),e.EFF(18),e.nI1(19,"translate"),e.k0s()()(),e.j41(20,"div",10),e.DNE(21,A,2,1,"div",11)(22,t,2,3,"ng-template",null,0,e.C5r)(24,s,2,3,"nav",12),e.nI1(25,"async"),e.DNE(26,r,1,2,"app-no-data",13),e.nI1(27,"async"),e.k0s(),e.j41(28,"app-delete-modal",14,1),e.bIt("deleteItem",function(I){return e.eBV(c),e.Njj(_.onActionClicked(I.actionToPerform,I.data))}),e.k0s()}if(2&n){let c,g;const I=e.sdS(23);e.R7$(2),e.FS9("placeholder",e.bMT(3,11,"search_your_files")),e.Y8G("formControl",_.term),e.R7$(4),e.JRh(e.bMT(7,13,"sort_by_desc")),e.R7$(3),e.JRh(e.bMT(10,15,"sort_by_newest")),e.R7$(3),e.JRh(e.bMT(13,17,"sort_by_oldest")),e.R7$(3),e.JRh(e.bMT(16,19,"sort_by_smallest")),e.R7$(3),e.JRh(e.bMT(19,21,"sort_by_largest")),e.R7$(3),e.Y8G("ngIf",_.loading)("ngIfElse",I),e.R7$(3),e.Y8G("ngIf",null==(c=e.bMT(25,23,_.attachment$))||null==c.data?null:c.data.length),e.R7$(2),e.Y8G("ngIf",!(null!=(g=e.bMT(27,25,_.attachment$))&&null!=g.data&&g.data.length||_.loading))}},dependencies:[p.Sq,p.bT,u.xH,u.y7,u.me,u.BC,u.l_,f.tg,f.do,f.U0,f._H,R.V,b.e,T.F,P.w,O.p,p.Jj,B.D9]})}}(0,d.Cg)([(0,D.l6)(M.p.attachment)],m.prototype,"attachment$",void 0)},865:(F,C,a)=>{a.d(C,{X:()=>$});var d=a(467),e=a(4438),p=a(6911),D=a(3111),u=a(3487),h=a(5482),x=a(177),M=a(8696),v=a(4179),f=a(1005),R=a(4484),b=a(3955);const T=["mediaModal"];function P(o,E){if(1&o){const t=e.RV6();e.j41(0,"app-media-box",17),e.bIt("setImage",function(r){e.eBV(t);const m=e.XpG(3);return e.Njj(m.setImage(r))}),e.k0s()}if(2&o){const t=e.XpG(3);e.Y8G("multiple",t.multipleImage)("url",t.url)("deleteAction",!1)}}function O(o,E){1&o&&(e.j41(0,"li",14)(1,"a",15),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,P,1,3,"ng-template",16),e.k0s()),2&o&&(e.Y8G("ngbNavItem","select"),e.R7$(2),e.JRh(e.bMT(3,2,"select_file")))}function B(o,E){if(1&o){const t=e.RV6();e.j41(0,"ngx-dropzone-image-preview",20),e.bIt("removed",function(){const r=e.eBV(t).$implicit,m=e.XpG(4);return e.Njj(m.onRemove(r))}),e.j41(1,"ngx-dropzone-label"),e.EFF(2),e.k0s()()}if(2&o){const t=E.$implicit;e.Y8G("file",t)("removable",!0),e.R7$(2),e.Lme("",t.name," (",t.type,")")}}function j(o,E){if(1&o){const t=e.RV6();e.j41(0,"div",18),e.bIt("change",function(r){e.eBV(t);const m=e.XpG(3);return e.Njj(m.onSelect(r))}),e.j41(1,"ngx-dropzone-label")(2,"div")(3,"h2"),e.EFF(4),e.nI1(5,"translate"),e.k0s()()(),e.DNE(6,B,3,4,"ngx-dropzone-image-preview",19),e.k0s()}if(2&o){const t=e.XpG(3);e.Y8G("accept","image/*"),e.R7$(4),e.JRh(e.bMT(5,3,"drop_files_here")),e.R7$(2),e.Y8G("ngForOf",t.files)}}function A(o,E){1&o&&(e.j41(0,"li",14)(1,"a",15),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,j,7,5,"ng-template",16),e.k0s()),2&o&&(e.Y8G("ngbNavItem","upload"),e.R7$(2),e.JRh(e.bMT(3,2,"upload_new")))}function G(o,E){if(1&o){const t=e.RV6();e.j41(0,"div",2)(1,"h2"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"app-button",3),e.bIt("click",function(){const r=e.eBV(t).$implicit;return e.Njj(r.dismiss("Cross click"))}),e.nrm(5,"i",4),e.k0s()(),e.j41(6,"div",5)(7,"ul",6,1),e.mxI("activeIdChange",function(r){e.eBV(t);const m=e.XpG();return e.DH7(m.active,r)||(m.active=r),e.Njj(r)}),e.DNE(9,O,5,4,"li",7)(10,A,5,4,"li",8),e.k0s(),e.nrm(11,"div",9),e.k0s(),e.j41(12,"div",10),e.nrm(13,"div",11),e.j41(14,"div",12)(15,"app-button",13),e.bIt("click",function(){const r=e.eBV(t).$implicit,m=e.sdS(8),i=e.XpG();return e.Njj("upload"==i.active?i.addMedia(m):i.selectedMedia(r))}),e.EFF(16),e.nI1(17,"translate"),e.k0s()()()}if(2&o){const t=e.sdS(8),s=e.XpG();e.R7$(2),e.JRh(e.bMT(3,13,"insert_media")),e.R7$(2),e.HbH("btn btn-close"),e.Y8G("spinner",!1)("id","media_close_btn"),e.R7$(3),e.R50("activeId",s.active),e.R7$(2),e.Y8G("ngIf",s.selectMedia),e.R7$(),e.Y8G("hasPermission","attachment.create"),e.R7$(),e.Y8G("ngbNavOutlet",t),e.R7$(4),e.HbH("align-items-center btn btn-theme d-flex"),e.Y8G("id","media_btn"),e.R7$(),e.SpI(" ",e.bMT(17,15,"insert_media")," ")}}let $=(()=>{class o{constructor(t,s,r){this.store=t,this.notificationService=s,this.modalService=r,this.active="select",this.modalOpen=!1,this.files=[],this.selectMedia=!0,this.multipleImage=!1,this.url=!1,this.selectImage=new e.bkB}openModal(){var t=this;return(0,d.A)(function*(){t.modalOpen=!0,t.active=t.selectMedia?"select":"upload",t.modalService.open(t.MediaModal,{ariaLabelledBy:"Media-Modal",centered:!0,windowClass:"theme-modal modal-xl media-modal"}).result.then(s=>{t.closeResult=`Closed with: ${s}`},s=>{t.closeResult=`Dismissed ${t.getDismissReason(s)}`})})()}getDismissReason(t){return this.active=this.selectMedia?"select":"upload",t===p.PQ.ESC?"by pressing ESC":t===p.PQ.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}onSelect(t){this.files.length+t.addedFiles.length<=5?this.files.push(...t.addedFiles):this.notificationService.showError("You've reached 5 file maximum.")}onRemove(t){this.files.splice(this.files.indexOf(t),1)}addMedia(t){this.files.length&&"upload"==this.active&&this.store.dispatch(new D.KQ(this.files)).subscribe({complete:()=>{this.files=[],this.selectMedia?t.select("select"):this.modalService.dismissAll()}})}setImage(t){this.media=t}selectedMedia(t){this.selectImage.emit(this.media),t.dismiss("close")}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}static{this.\u0275fac=function(s){return new(s||o)(e.rXU(u.il),e.rXU(h.J),e.rXU(p.Bq))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-media-modal"]],viewQuery:function(s,r){if(1&s&&e.GBs(T,5),2&s){let m;e.mGM(m=e.lsd())&&(r.MediaModal=m.first)}},inputs:{selectMedia:"selectMedia",multipleImage:"multipleImage",url:"url"},outputs:{selectImage:"selectImage"},decls:2,vars:0,consts:[["mediaModal",""],["nav","ngbNav"],[1,"modal-header"],[3,"click","spinner","id"],[1,"ri-close-line"],[1,"modal-body"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],[3,"ngbNavItem",4,"ngIf"],[3,"ngbNavItem",4,"hasPermission"],[1,"mt-2",3,"ngbNavOutlet"],[1,"modal-footer"],[1,"left-part"],[1,"right-part"],[3,"click","id"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"setImage","multiple","url","deleteAction"],["ngx-dropzone","",1,"content-section","drop-files-sec",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","file","removable"]],template:function(s,r){1&s&&e.DNE(0,G,18,17,"ng-template",null,0,e.C5r)},dependencies:[x.Sq,x.bT,p.Um,p.X9,p.sy,p.Gx,p.Ri,p.WA,p.m_,M.s3,M.Gt,M.bB,v.b,f.Q,R.p,b.D9]})}}return o})()},6983:(F,C,a)=>{a.d(C,{F:()=>u});var d=a(4438),e=a(177),p=a(3955);function D(h,x){if(1&h&&d.nrm(0,"img",1),2&h){const M=d.XpG();d.Y8G("src",M.image,d.B4B)}}let u=(()=>{class h{constructor(){this.class="no-data-added"}static{this.\u0275fac=function(v){return new(v||h)}}static{this.\u0275cmp=d.VBU({type:h,selectors:[["app-no-data"]],inputs:{class:"class",image:"image",text:"text"},decls:5,vars:6,consts:[["class","img-fluid","alt","no-data",3,"src",4,"ngIf"],["alt","no-data",1,"img-fluid",3,"src"]],template:function(v,f){1&v&&(d.j41(0,"div"),d.DNE(1,D,1,1,"img",0),d.j41(2,"h4"),d.EFF(3),d.nI1(4,"translate"),d.k0s()()),2&v&&(d.HbH(f.class),d.R7$(),d.Y8G("ngIf",f.image),d.R7$(2),d.JRh(d.bMT(4,4,f.text)))},dependencies:[e.bT,p.D9]})}}return h})()}}]);