"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[320],{320:(ct,T,i)=>{i.r(T),i.d(T,{BlogModule:()=>rt});var v=i(177),p=i(3487),h=i(6052),g=i(1583),y=i(1635),b=i(3110),m=i(7712),t=i(4438),F=i(67),C=i(628),G=i(4484),$=i(3955);const M=()=>["/blog/create"];function R(a,o){1&a&&(t.j41(0,"div",3)(1,"a",4),t.nrm(2,"i",5),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&a&&(t.R7$(),t.Y8G("routerLink",t.lJ4(4,M)),t.R7$(2),t.SpI(" ",t.bMT(4,2,"add_blog")," "))}class f{constructor(o,s){this.store=o,this.router=s,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"blog.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"blog.destroy"}],data:[],total:0}}ngOnInit(){this.blog$.subscribe(o=>{this.tableConfig.data=o?o?.data:[],this.tableConfig.total=o?o?.total:0})}onTableChange(o){this.store.dispatch(new m.GA(o)).subscribe()}onActionClicked(o){"edit"==o.actionToPerform?this.edit(o.data):"status"==o.actionToPerform?this.status(o.data):"delete"==o.actionToPerform?this.delete(o.data):"deleteAll"==o.actionToPerform&&this.deleteAll(o.data)}edit(o){this.router.navigateByUrl(`/blog/edit/${o.id}`)}status(o){this.store.dispatch(new m.YQ(o.id,o.status))}delete(o){this.store.dispatch(new m.yb(o.id))}deleteAll(o){this.store.dispatch(new m.Zs(o))}static{this.\u0275fac=function(s){return new(s||f)(t.rXU(p.il),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:f,selectors:[["app-blog"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(s,e){1&s&&(t.j41(0,"app-page-wrapper",0),t.DNE(1,R,5,5,"div",1),t.j41(2,"app-table",2),t.bIt("tableChanged",function(r){return e.onTableChange(r)})("rowClicked",function(r){return e.edit(r)})("action",function(r){return e.onActionClicked(r)}),t.k0s()()),2&s&&(t.Y8G("gridClass","col-sm-12")("title","blog"),t.R7$(),t.Y8G("hasPermission","blog.create"),t.R7$(),t.Y8G("tableConfig",e.tableConfig)("hasCheckbox",!0))},dependencies:[g.Wk,F.O,C.k,G.p,$.D9]})}}(0,y.Cg)([(0,p.l6)(b.g.blog)],f.prototype,"blog$",void 0);var n=i(9417),Y=i(1413),A=i(7673),j=i(5558),k=i(1397),w=i(6977),U=i(2314),E=i(5604),J=i(4034),S=i(7500),V=i(5859),N=i(7539),x=i(9285),D=i(1005);const I=()=>[];function L(a,o){1&a&&(t.j41(0,"div",21),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"title_is_required")," "))}function O(a,o){1&a&&(t.j41(0,"div",21),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"thumbnail_is_required")," "))}function P(a,o){1&a&&(t.j41(0,"div",21),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&a&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"select_category_is_required")," "))}class c{constructor(o,s,e,l){this.store=o,this.route=s,this.router=e,this.formBuilder=l,this.selectedCategories=[],this.selectedTags=[],this.html="",this.destroy$=new Y.B,this.store.dispatch(new E.dT({type:"post"})),this.store.dispatch(new U.sQ({type:"post"})),this.form=this.formBuilder.group({title:new n.MJ("",[n.k0.required]),description:new n.MJ,content:new n.MJ,meta_title:new n.MJ,meta_description:new n.MJ,blog_meta_image_id:new n.MJ,blog_thumbnail_id:new n.MJ("",[n.k0.required]),categories:new n.MJ("",[n.k0.required]),tags:new n.MJ,is_featured:new n.MJ(0),is_sticky:new n.MJ(0),status:new n.MJ(1)})}ngOnInit(){this.route.params.pipe((0,j.n)(o=>o.id?this.store.dispatch(new m.xm(o.id)).pipe((0,k.Z)(()=>this.store.select(b.g.selectedBlog))):(0,A.of)()),(0,w.Q)(this.destroy$)).subscribe(o=>{this.id=o?.id,this.selectedCategories=o?.categories.map(s=>s?.id),this.selectedTags=o?.tags.map(s=>s?.id),this.form.patchValue({title:o?.title,description:o?.description,content:o?.content,blog_thumbnail_id:o?.blog_thumbnail_id,categories:this.selectedCategories,tags:this.selectedTags,meta_title:o?.meta_title,meta_description:o?.meta_description,is_featured:o?.is_featured,is_sticky:o?.is_sticky,status:o?.status})}),this.editor=new h.KE}selectThumbnail(o){Array.isArray(o)||this.form.controls.blog_thumbnail_id.setValue(o?o.id:"")}selectMetaImage(o){Array.isArray(o)||this.form.controls.blog_meta_image_id.setValue(o?o.id:null)}selectCategoryItem(o){Array.isArray(o)&&this.form.controls.categories.setValue(o)}selectTagItem(o){Array.isArray(o)&&this.form.controls.tags.setValue(o)}submit(){this.form.markAllAsTouched();let o=new m.ly(this.form.value);"edit"==this.type&&this.id&&(o=new m.Yb(this.form.value,this.id)),this.form.valid&&this.store.dispatch(o).subscribe({complete:()=>{this.router.navigateByUrl("/blog")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(s){return new(s||c)(t.rXU(p.il),t.rXU(g.nX),t.rXU(g.Ix),t.rXU(n.ok))}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["app-form-blog"]],inputs:{type:"type"},decls:52,vars:87,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[1,"custom-editor"],[3,"editor"],["formControlName","content",3,"editor","ngModel","disabled","placeholder"],[3,"selectedFiles","multipleImage","image","helpText"],[3,"selectedItem","position","selectedOption","options","subArrayKey"],[3,"selectedItem","position","selectedOption","options"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","is_featured","formControlName","is_featured"],[1,"switch-state"],["type","checkbox","id","is_sticky","formControlName","is_sticky"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","multipleImage","image"],["type","checkbox","id","status","formControlName","status"],[3,"id"],[1,"invalid-feedback"]],template:function(s,e){if(1&s&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return e.submit()}),t.j41(1,"app-form-fields",1),t.nrm(2,"input",2),t.nI1(3,"translate"),t.DNE(4,L,3,3,"div",3),t.k0s(),t.j41(5,"app-form-fields",1),t.nrm(6,"textarea",4),t.nI1(7,"translate"),t.k0s(),t.j41(8,"app-form-fields",1)(9,"div",5),t.nrm(10,"ngx-editor-menu",6)(11,"ngx-editor",7),t.k0s()(),t.j41(12,"app-form-fields",1)(13,"app-image-upload",8),t.nI1(14,"async"),t.bIt("selectedFiles",function(r){return e.selectThumbnail(r)}),t.k0s(),t.DNE(15,O,3,3,"div",3),t.k0s(),t.j41(16,"app-form-fields",1)(17,"app-advanced-dropdown",9),t.nI1(18,"async"),t.nI1(19,"async"),t.bIt("selectedItem",function(r){return e.selectCategoryItem(r)}),t.k0s(),t.DNE(20,P,3,3,"div",3),t.k0s(),t.j41(21,"app-form-fields",1)(22,"app-advanced-dropdown",10),t.nI1(23,"async"),t.nI1(24,"async"),t.bIt("selectedItem",function(r){return e.selectTagItem(r)}),t.k0s()(),t.j41(25,"app-form-fields",1)(26,"div",11)(27,"label",12),t.nrm(28,"input",13)(29,"span",14),t.k0s()()(),t.j41(30,"app-form-fields",1)(31,"div",11)(32,"label",12),t.nrm(33,"input",15)(34,"span",14),t.k0s()()(),t.j41(35,"app-form-fields",1),t.nrm(36,"input",16),t.nI1(37,"translate"),t.k0s(),t.j41(38,"app-form-fields",1),t.nrm(39,"textarea",17),t.nI1(40,"translate"),t.k0s(),t.j41(41,"app-form-fields",1)(42,"app-image-upload",18),t.nI1(43,"async"),t.bIt("selectedFiles",function(r){return e.selectMetaImage(r)}),t.k0s()(),t.j41(44,"app-form-fields",1)(45,"div",11)(46,"label",12),t.nrm(47,"input",19)(48,"span",14),t.k0s()()(),t.j41(49,"app-button",20),t.EFF(50),t.nI1(51,"translate"),t.k0s()()),2&s){let l,r,u,B;t.Y8G("formGroup",e.form),t.R7$(),t.Y8G("label","title")("for","title")("required",!0),t.R7$(),t.FS9("placeholder",t.bMT(3,63,"enter_blog_title")),t.R7$(2),t.Y8G("ngIf",e.form.controls.title.touched&&(null==e.form.controls.title.errors?null:e.form.controls.title.errors.required)),t.R7$(),t.Y8G("label","description")("for","desc")("required",!1),t.R7$(),t.FS9("placeholder",t.bMT(7,65,"enter_blog_description")),t.R7$(2),t.Y8G("label","content")("for","content")("required",!1),t.R7$(2),t.Y8G("editor",e.editor),t.R7$(),t.Y8G("editor",e.editor)("ngModel",e.html)("disabled",!1)("placeholder","Type here..."),t.R7$(),t.Y8G("label","thumbnail")("for","image")("required",!0),t.R7$(),t.Y8G("multipleImage",!1)("image",null==(l=t.bMT(14,67,e.blog$))?null:l.blog_thumbnail)("helpText","*Upload image size 1500x700px recommended"),t.R7$(2),t.Y8G("ngIf",e.form.controls.blog_thumbnail_id.touched&&(null==e.form.controls.blog_thumbnail_id.errors?null:e.form.controls.blog_thumbnail_id.errors.required)),t.R7$(),t.Y8G("label","select_categories")("for","category")("required",!0),t.R7$(),t.Y8G("position","top")("selectedOption",e.selectedCategories)("options",null!=(r=t.bMT(18,69,e.category$))&&null!=r.data&&r.data.length?null==(r=t.bMT(19,71,e.category$))?null:r.data:t.lJ4(85,I))("subArrayKey","subcategories"),t.R7$(3),t.Y8G("ngIf",e.form.controls.categories.touched&&(null==e.form.controls.categories.errors?null:e.form.controls.categories.errors.required)),t.R7$(),t.Y8G("label","select_tags")("for","tag")("required",!1),t.R7$(),t.Y8G("position","top")("selectedOption",e.selectedTags)("options",null!=(u=t.bMT(23,73,e.tag$))&&null!=u.data&&u.data.length?null==(u=t.bMT(24,75,e.tag$))?null:u.data:t.lJ4(86,I)),t.R7$(3),t.Y8G("label","featured")("for","is_featured")("required",!1),t.R7$(5),t.Y8G("label","sticky")("for","is_sticky")("required",!1),t.R7$(5),t.Y8G("label","meta_title")("for","meta_title")("required",!1),t.R7$(),t.FS9("placeholder",t.bMT(37,77,"enter_meta_title")),t.R7$(2),t.Y8G("label","meta_description")("for","meta_description")("required",!1),t.R7$(),t.FS9("placeholder",t.bMT(40,79,"enter_meta_description")),t.R7$(2),t.Y8G("label","meta_image")("for","meta_image")("required",!1),t.R7$(),t.Y8G("multipleImage",!1)("image",null==(B=t.bMT(43,81,e.blog$))?null:B.blog_meta_image),t.R7$(2),t.Y8G("label","status")("for","status")("required",!1),t.R7$(5),t.Y8G("id","blog_btn"),t.R7$(),t.SpI(" ",t.bMT(51,83,"create"==e.type?"save_blog":"update_blog")," ")}},dependencies:[v.bT,n.qT,n.me,n.Zm,n.BC,n.cb,n.j4,n.JD,V.z,N.W,x.X,D.Q,h.Cl,h.Zu,v.Jj,$.D9]})}}(0,y.Cg)([(0,p.l6)(b.g.selectedBlog)],c.prototype,"blog$",void 0),(0,y.Cg)([(0,p.l6)(J.Y.category)],c.prototype,"category$",void 0),(0,y.Cg)([(0,p.l6)(S.U.tag)],c.prototype,"tag$",void 0);let X=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-create-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(e,l){1&e&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-blog",1),t.k0s()),2&e&&(t.Y8G("title","create_blog"),t.R7$(),t.Y8G("type","create"))},dependencies:[C.k,c]})}}return a})(),_=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-edit-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(e,l){1&e&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-blog",1),t.k0s()),2&e&&(t.Y8G("title","edit_blog"),t.R7$(),t.Y8G("type","edit"))},dependencies:[C.k,c]})}}return a})();var Z=i(7706);let K=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(e,l){1&e&&t.nrm(0,"app-category",0),2&e&&t.Y8G("categoryType","post")},dependencies:[Z.y]})}}return a})();var Q=i(1103);let z=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-edit-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(e,l){1&e&&t.nrm(0,"app-edit-category",0),2&e&&t.Y8G("categoryType","post")},dependencies:[Q.G]})}}return a})();var W=i(9066);let H=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(e,l){1&e&&t.nrm(0,"app-tag",0),2&e&&t.Y8G("tagType","post")},dependencies:[W.e]})}}return a})();var q=i(8417);let tt=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-create-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(e,l){1&e&&t.nrm(0,"app-create-tag",0),2&e&&t.Y8G("tagType","post")},dependencies:[q.o]})}}return a})();var et=i(7913);let ot=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-edit-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(e,l){1&e&&t.nrm(0,"app-edit-tag",0),2&e&&t.Y8G("tagType","post")},dependencies:[et.a]})}}return a})();var d=i(8745);const at=[{path:"",component:f,canActivate:[d.L],data:{permission:"blog.index"}},{path:"create",component:X,canActivate:[d.L],data:{permission:["blog.index","blog.create"]}},{path:"edit/:id",component:_,canActivate:[d.L],data:{permission:["blog.index","blog.edit"]}},{path:"category",component:K,canActivate:[d.L],data:{permission:["category.index"]}},{path:"category/edit/:id",component:z,canActivate:[d.L],data:{permission:["category.index","category.create"]}},{path:"tag",component:H,canActivate:[d.L],data:{permission:["tag.index"]}},{path:"tag/create",component:tt,canActivate:[d.L],data:{permission:["tag.create"]}},{path:"tag/edit/:id",component:ot,canActivate:[d.L],data:{permission:["tag.edit"]}}];let it=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[g.iI.forChild(at),g.iI]})}}return a})();var st=i(1592),nt=i(7095),lt=i(5461);let rt=(()=>{class a{static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[v.MD,it,st.G,nt.CategoryModule,lt.TagModule,p.rK.forFeature([b.g]),h.VZ]})}}return a})()}}]);