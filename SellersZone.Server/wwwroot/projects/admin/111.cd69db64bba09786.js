"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[111,443],{1111:(F,g,i)=>{i.r(g),i.d(g,{AttributeModule:()=>L});var a=i(177),p=i(1583),C=i(1635),f=i(3487),m=i(2354),h=i(1802),t=i(4438),b=i(67),v=i(628),d=i(4484),u=i(3955);const R=()=>["/attribute/create"];function I(r,n){1&r&&(t.j41(0,"div",3)(1,"a",4),t.nrm(2,"i",5),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&r&&(t.R7$(),t.Y8G("routerLink",t.lJ4(4,R)),t.R7$(2),t.SpI(" ",t.bMT(4,2,"add_attribute")," "))}class y{constructor(n,e){this.store=n,this.router=e,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"attribute.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"attribute.destroy"}],data:[],total:0}}ngOnInit(){this.attribute$.subscribe(n=>{this.tableConfig.data=n?n?.data:[],this.tableConfig.total=n?n?.total:0})}onTableChange(n){this.store.dispatch(new h.mR(n))}onActionClicked(n){"edit"==n.actionToPerform?this.edit(n.data):"delete"==n.actionToPerform?this.delete(n.data):"deleteAll"==n.actionToPerform&&this.deleteAll(n.data)}edit(n){this.router.navigateByUrl(`/attribute/edit/${n.id}`)}delete(n){this.store.dispatch(new h.wk(n.id))}deleteAll(n){this.store.dispatch(new h.vs(n))}static{this.\u0275fac=function(e){return new(e||y)(t.rXU(f.il),t.rXU(p.Ix))}}static{this.\u0275cmp=t.VBU({type:y,selectors:[["app-attribute"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(e,o){1&e&&(t.j41(0,"app-page-wrapper",0),t.DNE(1,I,5,5,"div",1),t.j41(2,"app-table",2),t.bIt("tableChanged",function(c){return o.onTableChange(c)})("rowClicked",function(c){return o.edit(c)})("action",function(c){return o.onActionClicked(c)}),t.k0s()()),2&e&&(t.Y8G("gridClass","col-sm-12")("title","attribute"),t.R7$(),t.Y8G("hasPermission","attribute.create"),t.R7$(),t.Y8G("tableConfig",o.tableConfig)("hasCheckbox",!0))},dependencies:[p.Wk,b.O,v.k,d.p,u.D9]})}}(0,C.Cg)([(0,f.l6)(m.U.attribute)],y.prototype,"attribute$",void 0);var l=i(9417),T=i(1413),$=i(7673),E=i(5558),M=i(1397),G=i(6977),k=i(9517),j=i(5859),D=i(1005);const S=()=>[];function B(r,n){1&r&&(t.j41(0,"div",13),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"attribute_name_is_required")," "))}function U(r,n){1&r&&(t.j41(0,"div",13),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"value_is_required")," "))}function x(r,n){if(1&r&&(t.j41(0,"div",19)(1,"div",20),t.nrm(2,"input",21),t.j41(3,"h6"),t.EFF(4),t.k0s()()()),2&r){let e;const o=t.XpG().$implicit;t.R7$(4),t.JRh(null==(e=o.get("hex_color"))?null:e.value)}}function Y(r,n){if(1&r){const e=t.RV6();t.j41(0,"div",22)(1,"a",23),t.bIt("click",function(){t.eBV(e);const s=t.XpG().index,c=t.XpG();return t.Njj(c.remove(s))}),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}2&r&&(t.R7$(2),t.JRh(t.bMT(3,1,"remove")))}function O(r,n){if(1&r&&(t.j41(0,"app-form-fields",14),t.nI1(1,"translate"),t.j41(2,"div",15)(3,"div"),t.nrm(4,"input",16),t.nI1(5,"translate"),t.DNE(6,U,3,3,"div",3),t.k0s(),t.DNE(7,x,5,1,"div",17)(8,Y,4,3,"div",18),t.k0s()()),2&r){let e;const o=n.$implicit,s=n.index,c=t.XpG();t.FS9("formGroupName",s),t.Y8G("label",t.bMT(1,10,"value"))("for","value")("required",!0),t.R7$(3),t.HbH("color"===c.form.get("style").value?"col-sm-7 col-9":"col-sm-10 col-9"),t.R7$(),t.FS9("placeholder",t.bMT(5,12,"attribute_value")),t.R7$(2),t.Y8G("ngIf",o.get("value").touched&&(null==(e=o.get("value").errors)?null:e.required)),t.R7$(),t.Y8G("ngIf","color"===c.form.get("style").value),t.R7$(),t.Y8G("ngIf",(null==c.valueControl||null==c.valueControl.controls?null:c.valueControl.controls.length)>1)}}let A=(()=>{class r{constructor(e,o,s,c){this.store=e,this.route=o,this.router=s,this.formBuilder=c,this.documents=[{value:"",hex_color:"",id:""}],this.destroy$=new T.B,this.variantStyle=[{value:"rectangle",label:"Rectangle"},{value:"circle",label:"Circle"},{value:"radio",label:"Radio"},{value:"dropdown",label:"Dropdown"},{value:"image",label:"Image"},{value:"color",label:"Color"}],this.form=this.formBuilder.group({name:new l.MJ("",[l.k0.required]),style:new l.MJ("rectangle",[l.k0.required]),status:new l.MJ(1),value:this.formBuilder.array([],[l.k0.required])})}get valueControl(){return this.form.get("value")}ngOnInit(){this.route.params.pipe((0,E.n)(e=>e.id?this.store.dispatch(new h.lH(e.id)).pipe((0,M.Z)(()=>this.store.select(m.U.selectedAttribute))):(0,$.of)()),(0,G.Q)(this.destroy$)).subscribe(e=>{this.id=e?.id,this.form.patchValue({name:e?.name,style:e?.style,status:e?.status}),e?.attribute_values.forEach(o=>this.valueControl.push(this.formBuilder.group({value:new l.MJ(o.value,[l.k0.required]),hex_color:new l.MJ(o.hex_color),id:new l.MJ(o.id,[])})))}),"create"==this.type&&this.documents.forEach(e=>this.valueControl.push(this.formBuilder.group({value:[e.value,[l.k0.required]],hex_color:[e.hex_color],id:[e.id]})))}add(e){e.preventDefault();const o="color"===this.form.get("style").value?this.formBuilder.group({value:["",[l.k0.required]],hex_color:[""]}):this.formBuilder.group({value:["",[l.k0.required]]});this.valueControl.push(o)}remove(e){this.valueControl.length<=1||this.valueControl.removeAt(+e)}submit(){this.form.markAllAsTouched();let e=new h.Xg(this.form.value);"edit"==this.type&&this.id&&(e=new h.IV(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/attribute")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(o){return new(o||r)(t.rXU(f.il),t.rXU(p.nX),t.rXU(p.Ix),t.rXU(l.ok))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-form-attribute"]],inputs:{type:"type"},decls:22,vars:32,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","style",1,"custom-select","d-block",3,"data","placeholder","noResultMessage"],[1,"help-text"],["formArrayName","value"],[3,"label","for","required","formGroupName",4,"ngFor","ngForOf"],[1,"row"],[1,"col-2","offset-sm-2"],[3,"click","id","spinner"],[1,"border-up-class","mt-4"],[3,"id"],[1,"invalid-feedback"],[3,"label","for","required","formGroupName"],[1,"row","g-sm-4","g-3","align-items-center"],["type","text","formControlName","value",1,"form-control",3,"placeholder"],["class","col-sm-3 col-9",4,"ngIf"],["class","col-sm-2 col-3",4,"ngIf"],[1,"col-sm-3","col-9"],[1,"color-box"],["type","color","formControlName","hex_color",1,"form-control"],[1,"col-sm-2","col-3"],[1,"invalid-feedback","h-100","w-100","cursor-pointer",3,"click"]],template:function(o,s){1&o&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return s.submit()}),t.j41(1,"app-form-fields",1),t.nI1(2,"translate"),t.nrm(3,"input",2),t.nI1(4,"translate"),t.DNE(5,B,3,3,"div",3),t.k0s(),t.j41(6,"app-form-fields",1),t.nrm(7,"select2",4),t.nI1(8,"translate"),t.nI1(9,"translate"),t.j41(10,"p",5),t.EFF(11),t.k0s()(),t.qex(12,6),t.DNE(13,O,9,14,"app-form-fields",7),t.bVm(),t.j41(14,"div",8)(15,"div",9)(16,"app-button",10),t.bIt("click",function(V){return s.add(V)}),t.EFF(17),t.nI1(18,"translate"),t.k0s()()(),t.j41(19,"div",11)(20,"app-button",12),t.EFF(21),t.k0s()()()),2&o&&(t.Y8G("formGroup",s.form),t.R7$(),t.Y8G("label",t.bMT(2,21,"attribute_name"))("for","name")("required",!0),t.R7$(2),t.FS9("placeholder",t.bMT(4,23,"attribute_name")),t.R7$(2),t.Y8G("ngIf",s.form.controls.name.touched&&(null==s.form.controls.name.errors?null:s.form.controls.name.errors.required)),t.R7$(),t.Y8G("label","style")("for","style")("required",!0),t.R7$(),t.FS9("noResultMessage",t.bMT(8,25,"no_data_found")),t.Y8G("data",null!=s.variantStyle&&s.variantStyle.length?s.variantStyle:t.lJ4(31,S))("placeholder",t.bMT(9,27,"select_style")),t.R7$(4),t.JRh("*Choose the desired shape style, such as rectangle or circle. Based on your selection, variant options will be displayed on product page."),t.R7$(2),t.Y8G("ngForOf",s.valueControl.controls),t.R7$(3),t.HbH("btn btn-theme"),t.Y8G("id","add_value_btn")("spinner",!1),t.R7$(),t.SpI(" ",t.bMT(18,29,"add_value")," "),t.R7$(3),t.Y8G("id","attribute_btn"),t.R7$(),t.SpI(" ","create"==s.type?"Save Attribute":"Update Attribute"," "))},dependencies:[a.Sq,a.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,l.$R,l.v8,k.R6,j.z,D.Q,u.D9]})}}return r})(),P=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-create-attribute"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(o,s){1&o&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-attribute",1),t.k0s()),2&o&&(t.Y8G("title","add_attribute"),t.R7$(),t.Y8G("type","create"))},dependencies:[v.k,A]})}}return r})(),N=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-edit-attribute"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(o,s){1&o&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-attribute",1),t.k0s()),2&o&&(t.Y8G("title","edit_attribute"),t.R7$(),t.Y8G("type","edit"))},dependencies:[v.k,A]})}}return r})();var _=i(8745);const w=[{path:"",component:y,canActivate:[_.L],data:{permission:"attribute.index"}},{path:"create",component:P,canActivate:[_.L],data:{permission:["attribute.index","attribute.create"]}},{path:"edit/:id",component:N,canActivate:[_.L],data:{permission:["attribute.index","attribute.edit"]}}];let H=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[p.iI.forChild(w),p.iI]})}}return r})();var J=i(1592);let L=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[a.MD,H,J.G,f.rK.forFeature([m.U])]})}}return r})()},8745:(F,g,i)=>{i.d(g,{L:()=>f});var a=i(4438),p=i(3487),C=i(1583);let f=(()=>{class m{constructor(t,b){this.store=t,this.router=b}canActivate(t,b){const v=this.store.selectSnapshot(u=>u.account).permissions?.map(u=>u?.name),d=t.data?.permission;return!!(!d||!Array.isArray(d)&&v?.includes(d)||Array.isArray(d)&&d?.length&&d.every(u=>v?.includes(u)))||(this.router.navigate(["/error/403"]),!1)}static{this.\u0275fac=function(b){return new(b||m)(a.KVO(p.il),a.KVO(C.Ix))}}static{this.\u0275prov=a.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},5859:(F,g,i)=>{i.d(g,{z:()=>h});var a=i(4438),p=i(177),C=i(3955);const f=["*"];function m(t,b){1&t&&(a.j41(0,"span",1),a.EFF(1,"*"),a.k0s())}let h=(()=>{class t{constructor(){this.class="mb-4 row align-items-center g-2",this.labelClass="form-label-title col-sm-2 mb-0",this.gridClass="col-sm-10"}static{this.\u0275fac=function(d){return new(d||t)}}static{this.\u0275cmp=a.VBU({type:t,selectors:[["app-form-fields"]],inputs:{class:"class",label:"label",labelClass:"labelClass",gridClass:"gridClass",for:"for",required:"required"},ngContentSelectors:f,decls:7,vars:11,consts:[["class","theme-color ms-2 required-dot",4,"ngIf"],[1,"theme-color","ms-2","required-dot"]],template:function(d,u){1&d&&(a.NAR(),a.j41(0,"div")(1,"label"),a.EFF(2),a.nI1(3,"translate"),a.DNE(4,m,2,0,"span",0),a.k0s(),a.j41(5,"div"),a.SdG(6),a.k0s()()),2&d&&(a.HbH(u.class),a.R7$(),a.HbH(u.labelClass),a.BMQ("for",u.for),a.R7$(),a.SpI(" ",a.bMT(3,9,u.label),""),a.R7$(2),a.Y8G("ngIf",u.required),a.R7$(),a.HbH(u.gridClass))},dependencies:[p.bT,C.D9]})}}return t})()}}]);