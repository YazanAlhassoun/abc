"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[95],{7706:(I,f,a)=>{a.d(f,{y:()=>_});var p=a(1635),g=a(3487),d=a(4034),m=a(5604),e=a(4438),i=a(177),l=a(1583),h=a(628),v=a(4484),s=a(9417),b=a(6983),G=a(1825);const y=["deleteModal"],$=(r,c)=>[r,c];function F(r,c){if(1&r&&(e.j41(0,"a",8),e.nrm(1,"i",9),e.k0s()),2&r){const t=e.XpG();e.Y8G("routerLink",e.l_i(1,$,"post"==t.node.type?"/blog/category/edit":"/category/edit",null==t.node?null:t.node.id))}}function C(r,c){if(1&r){const t=e.RV6();e.j41(0,"a",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.DeleteModal.openModal("delete",o.node))}),e.nrm(1,"i",11),e.k0s()}}function K(r,c){if(1&r&&e.nrm(0,"app-tree-node",13),2&r){const t=c.$implicit,n=e.XpG(2);e.Y8G("node",t)("displayKey",n.displayKey)("recursionKey",n.recursionKey)}}function M(r,c){if(1&r&&(e.j41(0,"ul"),e.DNE(1,K,1,3,"app-tree-node",12),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.node[t.recursionKey])}}let Y=(()=>{class r{constructor(t,n,o){this.store=t,this.router=n,this.route=o,this.categoryType="product",this.showChildrenNode=!0}ngOnInit(){this.route.params.subscribe(t=>this.id=t.id)}delete(t,n){this.store.dispatch(new m.Ee(n.id,n.type)).subscribe({complete:()=>{this.router.navigateByUrl("post"==n.type?"/blog/category":"/category")}})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(g.il),e.rXU(l.Ix),e.rXU(l.nX))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-tree-node"]],viewQuery:function(n,o){if(1&n&&e.GBs(y,5),2&n){let u;e.mGM(u=e.lsd())&&(o.DeleteModal=u.first)}},inputs:{node:"node",recursionKey:"recursionKey",displayKey:"displayKey",categoryType:"categoryType"},decls:11,vars:10,consts:[["deleteModal",""],[1,"cursor-pointer"],["role","presentation",1,"tree-icon","file-icon",3,"click"],[1,"tree-options"],["href","javascript:void(0)",3,"routerLink",4,"hasPermission"],["href","javascript:void(0)",3,"click",4,"hasPermission"],[4,"ngIf"],[3,"deleteItem"],["href","javascript:void(0)",3,"routerLink"],[1,"ri-pencil-line","text-success"],["href","javascript:void(0)",3,"click"],[1,"ri-delete-bin-7-line","text-danger"],[3,"node","displayKey","recursionKey",4,"ngFor","ngForOf"],[3,"node","displayKey","recursionKey"]],template:function(n,o){if(1&n){const u=e.RV6();e.j41(0,"li",1)(1,"div")(2,"i",2),e.bIt("click",function(){return e.eBV(u),e.Njj(o.showChildrenNode=!o.showChildrenNode)}),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s(),e.j41(5,"div",3),e.DNE(6,F,2,4,"a",4)(7,C,2,0,"a",5),e.k0s()(),e.DNE(8,M,2,1,"ul",6),e.k0s(),e.j41(9,"app-delete-modal",7,0),e.bIt("deleteItem",function(j){return e.eBV(u),e.Njj(o.delete(j.actionToPerform,j.data))}),e.k0s()}2&n&&(e.AVh("inside-ul",o.node[o.recursionKey]&&o.node[o.recursionKey].length),e.R7$(3),e.HbH(o.node.id==o.id?"active":""),e.AVh("disabled","1"!=o.node.status),e.R7$(),e.JRh(o.node[o.displayKey]||(null==o.node?null:o.node.name)),e.R7$(2),e.Y8G("hasPermission","category.edit"),e.R7$(),e.Y8G("hasPermission","category.destroy"),e.R7$(),e.Y8G("ngIf",o.node[o.recursionKey]&&o.node[o.recursionKey].length&&o.showChildrenNode))},dependencies:[i.Sq,i.bT,l.Wk,G.w,v.p,r]})}}return r})();var R=a(3955);function E(r,c){if(1&r&&e.nrm(0,"app-tree-node",8),2&r){const t=c.$implicit,n=e.XpG(2);e.Y8G("node",t)("displayKey",n.displayKey)("recursionKey",n.recursionKey)("categoryType",n.categoryType)}}function N(r,c){if(1&r&&(e.j41(0,"ul",4)(1,"li",5)(2,"div"),e.nrm(3,"i",6),e.j41(4,"span"),e.EFF(5),e.nI1(6,"translate"),e.k0s()(),e.j41(7,"ul"),e.DNE(8,E,1,4,"app-tree-node",7),e.k0s()()()),2&r){const t=e.XpG();e.R7$(5),e.JRh(e.bMT(6,2,"categories")),e.R7$(3),e.Y8G("ngForOf",t.dataToShow)}}function S(r,c){1&r&&e.nrm(0,"app-no-data",9),2&r&&(e.HbH("no-data-added category-no-data"),e.Y8G("image","assets/svg/no-category.svg")("text","no_categories_found"))}let D=(()=>{class r{constructor(){this.displayKey="name",this.categoryType="product",this.treeSearch=new s.MJ(""),this.dataToShow=[],this.treeSearch.valueChanges.subscribe(t=>{t?(this.dataToShow=[],this.data.forEach(n=>{this.hasValue(n)&&this.dataToShow.push(n)})):this.dataToShow=this.data})}ngOnChanges(){this.dataToShow=this.data}hasValue(t){let n=!1;return t[this.displayKey].toLowerCase().includes(this.treeSearch?.value?.toLowerCase())&&(n=!0),t[this.recursionKey]?.length&&t[this.recursionKey].forEach(o=>{this.hasValue(o)&&(n=!0)}),n}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-tree"]],inputs:{type:"type",data:"data",recursionKey:"recursionKey",displayKey:"displayKey",categoryType:"categoryType"},features:[e.OA$],decls:5,vars:6,consts:[[1,"theme-tree-box"],[1,"form-control",3,"placeholder","formControl"],["class","tree-main-ul",4,"ngIf"],[3,"class","image","text",4,"ngIf"],[1,"tree-main-ul"],[1,"cursor-pointer"],["role","presentation",1,"tree-icon","folder-icon"],[3,"node","displayKey","recursionKey","categoryType",4,"ngFor","ngForOf"],[3,"node","displayKey","recursionKey","categoryType"],[3,"image","text"]],template:function(n,o){1&n&&(e.j41(0,"div",0),e.nrm(1,"input",1),e.nI1(2,"translate"),e.DNE(3,N,9,4,"ul",2),e.k0s(),e.DNE(4,S,1,4,"app-no-data",3)),2&n&&(e.R7$(),e.FS9("placeholder",e.bMT(2,4,"search_category")),e.Y8G("formControl",o.treeSearch),e.R7$(2),e.Y8G("ngIf",null==o.dataToShow?null:o.dataToShow.length),e.R7$(),e.Y8G("ngIf",!(null!=o.dataToShow&&o.dataToShow.length)))},dependencies:[i.Sq,i.bT,s.me,s.BC,s.l_,b.F,Y,R.D9]})}}return r})();var V=a(1413),B=a(7673),k=a(5558),w=a(1397),O=a(6977),U=a(5859),X=a(7539),A=a(9285),P=a(1005),J=a(8595);const L=r=>[r],H=()=>[];function W(r,c){1&r&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&r&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"name_is_required")," "))}function Q(r,c){1&r&&(e.j41(0,"app-form-fields",2),e.nI1(1,"translate"),e.j41(2,"div",15),e.nrm(3,"input",16),e.j41(4,"span",17),e.EFF(5,"%"),e.k0s()(),e.j41(6,"p",18),e.EFF(7),e.k0s()()),2&r&&(e.Y8G("label",e.bMT(1,4,"commission_rate"))("for","commission_rate")("required",!1),e.R7$(7),e.JRh("*Define the percentage of earnings retained as commission."))}let z=(()=>{class r{constructor(t,n,o,u){this.store=t,this.route=n,this.router=o,this.formBuilder=u,this.categoryType="product",this.destroy$=new V.B,this.form=this.formBuilder.group({name:new s.MJ("",[s.k0.required]),description:new s.MJ,parent_id:new s.MJ,type:new s.MJ(this.categoryType,[]),commission_rate:new s.MJ,category_image_id:new s.MJ,category_icon_id:new s.MJ,status:new s.MJ(!0)})}ngOnChanges(){this.form.controls.type.setValue(this.categoryType)}ngOnInit(){this.route.params.pipe((0,k.n)(t=>t.id?this.store.dispatch(new m.bz(t.id)).pipe((0,w.Z)(()=>this.store.select(d.Y.selectedCategory))):(0,B.of)()),(0,O.Q)(this.destroy$)).subscribe(t=>{this.category=t,this.form.patchValue({name:this.category?.name,description:this.category?.description,parent_id:this.category?.parent_id,type:this.category?.type,commission_rate:this.category?.commission_rate,category_image_id:this.category?.category_image_id,category_icon_id:this.category?.category_icon_id,status:this.category?.status})})}selectItem(t){Array.isArray(t)&&t.length?this.form.controls.parent_id.setValue(t[0]):this.form.controls.parent_id.setValue("")}selectCategoryImage(t){Array.isArray(t)||this.form.controls.category_image_id.setValue(t?t.id:"")}selectCategoryIcon(t){Array.isArray(t)||this.form.controls.category_icon_id.setValue(t?t.id:"")}submit(){this.form.markAllAsTouched();let t=new m.Tf(this.form.value);"edit"==this.type&&this.category?.id&&(t=new m.uq(this.form.value,this.category.id)),this.form.valid&&this.store.dispatch(t).subscribe({complete:()=>{"create"==this.type?(this.form.reset(),this.form.controls.category_image_id.setValue(""),this.form.controls.category_icon_id.setValue(""),this.form.controls.status.setValue(!0)):this.router.navigateByUrl("product"===this.form.value.type?"/category":"/blog/category")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(g.il),e.rXU(l.nX),e.rXU(l.Ix),e.rXU(s.ok))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-form-category"]],inputs:{type:"type",categories:"categories",categoryType:"categoryType"},features:[e.OA$],decls:30,vars:56,consts:[[3,"gridClass","title"],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[3,"label","for","required",4,"ngIf"],[3,"selectedItem","selectSingle","selectedOption","options","subArrayKey"],[3,"selectedFiles","multipleImage","image"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"],[1,"input-group"],["id","commission_rate","type","number","min","0","max","100","oninput","if (value > 100) value = 100; if (value < 0) value = 0;","placeholder","Enter Commision Rate","formControlName","commission_rate","numbersOnly","",1,"form-control"],[1,"input-group-text"],[1,"help-text"]],template:function(n,o){1&n&&(e.j41(0,"app-page-wrapper",0)(1,"form",1),e.bIt("ngSubmit",function(){return o.submit()}),e.j41(2,"app-form-fields",2),e.nI1(3,"translate"),e.nrm(4,"input",3),e.nI1(5,"translate"),e.DNE(6,W,3,3,"div",4),e.k0s(),e.j41(7,"app-form-fields",2),e.nI1(8,"translate"),e.nrm(9,"textarea",5),e.nI1(10,"translate"),e.k0s(),e.DNE(11,Q,8,6,"app-form-fields",6),e.j41(12,"app-form-fields",2),e.nI1(13,"translate"),e.j41(14,"app-advanced-dropdown",7),e.bIt("selectedItem",function(T){return o.selectItem(T)}),e.k0s()(),e.j41(15,"app-form-fields",2),e.nI1(16,"translate"),e.j41(17,"app-image-upload",8),e.bIt("selectedFiles",function(T){return o.selectCategoryImage(T)}),e.k0s()(),e.j41(18,"app-form-fields",2),e.nI1(19,"translate"),e.j41(20,"app-image-upload",8),e.bIt("selectedFiles",function(T){return o.selectCategoryIcon(T)}),e.k0s()(),e.j41(21,"app-form-fields",2),e.nI1(22,"translate"),e.j41(23,"div",9)(24,"label",10),e.nrm(25,"input",11)(26,"span",12),e.k0s()()(),e.j41(27,"app-button",13),e.EFF(28),e.nI1(29,"translate"),e.k0s()()()),2&n&&(e.Y8G("gridClass","col-sm-12")("title",o.type+"_category"),e.R7$(),e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("label",e.bMT(3,35,"name"))("for","name")("required",!0),e.R7$(2),e.FS9("placeholder",e.bMT(5,37,"enter_name")),e.R7$(2),e.Y8G("ngIf",o.form.controls.name.touched&&(null==o.form.controls.name.errors?null:o.form.controls.name.errors.required)),e.R7$(),e.Y8G("label",e.bMT(8,39,"description"))("for","description")("required",!1),e.R7$(2),e.FS9("placeholder",e.bMT(10,41,"enter_description")),e.R7$(2),e.Y8G("ngIf","product"==o.categoryType),e.R7$(),e.Y8G("label",e.bMT(13,43,"select_parent"))("for","category")("required",!1),e.R7$(2),e.Y8G("selectSingle",!0)("selectedOption",o.category&&o.category.parent_id?e.eq3(53,L,o.category.parent_id):e.lJ4(55,H))("options",o.categories)("subArrayKey","subcategories"),e.R7$(),e.Y8G("label",e.bMT(16,45,"image"))("for","image")("required",!1),e.R7$(2),e.Y8G("multipleImage",!1)("image",null==o.category?null:o.category.category_image),e.R7$(),e.Y8G("label",e.bMT(19,47,"icon"))("for","icon")("required",!1),e.R7$(2),e.Y8G("multipleImage",!1)("image",null==o.category?null:o.category.category_icon),e.R7$(),e.Y8G("label",e.bMT(22,49,"status"))("for","status")("required",!1),e.R7$(6),e.Y8G("id","category_btn"),e.R7$(),e.SpI(" ",e.bMT(29,51,"create"==o.type?"save_category":"update_category")," "))},dependencies:[i.bT,s.qT,s.me,s.Q0,s.Zm,s.BC,s.cb,s.VZ,s.zX,s.j4,s.JD,U.z,X.W,h.k,A.X,P.Q,J.v,R.D9]})}}return r})();const Z=r=>[r];function x(r,c){if(1&r&&(e.j41(0,"a",9),e.nrm(1,"i",10),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&r){const t=e.XpG(2);e.Y8G("routerLink",e.eq3(4,Z,"post"==t.categoryType?"/blog/category":"/category")),e.R7$(2),e.SpI(" ",e.bMT(3,2,"create")," ")}}function q(r,c){if(1&r&&(e.j41(0,"div",7),e.DNE(1,x,4,6,"a",8),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngIf","edit"==t.type)}}function ee(r,c){if(1&r&&(e.nrm(0,"app-form-category",11),e.nI1(1,"async")),2&r){let t;const n=e.XpG();e.Y8G("categories",null==(t=e.bMT(1,3,n.category$))?null:t.data)("type",n.type)("categoryType",n.categoryType)}}class _{constructor(c){this.store=c,this.type="create",this.categoryType="product"}ngOnInit(){this.store.dispatch(new m.dT({type:this.categoryType}))}static{this.\u0275fac=function(t){return new(t||_)(e.rXU(g.il))}}static{this.\u0275cmp=e.VBU({type:_,selectors:[["app-category"]],inputs:{type:"type",categoryType:"categoryType"},decls:8,vars:10,consts:[[1,"row","m-0"],[1,"col-xl-4","p-0"],[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"data","recursionKey","type","categoryType"],[1,"col-xl-8","p-0"],[3,"categories","type","categoryType",4,"hasPermission"],["button",""],["class","align-items-center btn btn-theme d-flex",3,"routerLink",4,"ngIf"],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"],[3,"categories","type","categoryType"]],template:function(t,n){if(1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"app-page-wrapper",2),e.DNE(3,q,2,1,"div",3),e.nrm(4,"app-tree",4),e.nI1(5,"async"),e.k0s()(),e.j41(6,"div",5),e.DNE(7,ee,2,5,"app-form-category",6),e.k0s()()),2&t){let o;e.R7$(2),e.Y8G("gridClass","col-sm-12")("title","categories"),e.R7$(),e.Y8G("hasPermission","category.create"),e.R7$(),e.Y8G("data",null==(o=e.bMT(5,8,n.category$))?null:o.data)("recursionKey","subcategories")("type",n.type)("categoryType",n.categoryType),e.R7$(3),e.Y8G("hasPermission","category."+n.type)}},dependencies:[i.bT,l.Wk,h.k,v.p,D,z,i.Jj,R.D9]})}}(0,p.Cg)([(0,g.l6)(d.Y.category)],_.prototype,"category$",void 0)},7095:(I,f,a)=>{a.r(f),a.d(f,{CategoryModule:()=>G});var p=a(177),g=a(3487),d=a(1583),m=a(7706),e=a(1103),i=a(8745),l=a(4438);const h=[{path:"",component:m.y,canActivate:[i.L],data:{permission:"category.index"}},{path:"edit/:id",component:e.G,canActivate:[i.L],data:{permission:["category.index","category.edit"]}}];let v=(()=>{class y{static{this.\u0275fac=function(C){return new(C||y)}}static{this.\u0275mod=l.$C({type:y})}static{this.\u0275inj=l.G2t({imports:[d.iI.forChild(h),d.iI]})}}return y})();var s=a(1592),b=a(4034);let G=(()=>{class y{static{this.\u0275fac=function(C){return new(C||y)}}static{this.\u0275mod=l.$C({type:y})}static{this.\u0275inj=l.G2t({imports:[p.MD,v,s.G,g.rK.forFeature([b.Y])]})}}return y})()},1103:(I,f,a)=>{a.d(f,{G:()=>d});var p=a(4438),g=a(7706);let d=(()=>{class m{constructor(){this.categoryType="product"}static{this.\u0275fac=function(l){return new(l||m)}}static{this.\u0275cmp=p.VBU({type:m,selectors:[["app-edit-category"]],inputs:{categoryType:"categoryType"},decls:1,vars:2,consts:[[3,"type","categoryType"]],template:function(l,h){1&l&&p.nrm(0,"app-category",0),2&l&&p.Y8G("type","edit")("categoryType",h.categoryType)},dependencies:[g.y]})}}return m})()},8595:(I,f,a)=>{a.d(f,{v:()=>g});var p=a(4438);let g=(()=>{class d{constructor(e){this._el=e}onInputChange(e){const i=this._el.nativeElement.value;this._el.nativeElement.value=i.replace(/[^0-9]*/g,""),i!==this._el.nativeElement.value&&e.stopPropagation()}static{this.\u0275fac=function(i){return new(i||d)(p.rXU(p.aKT))}}static{this.\u0275dir=p.FsC({type:d,selectors:[["input","numbersOnly",""]],hostBindings:function(i,l){1&i&&p.bIt("input",function(v){return l.onInputChange(v)})}})}}return d})()}}]);