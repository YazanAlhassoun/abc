"use strict";(self.webpackChunkFastkart_Admin_SSR=self.webpackChunkFastkart_Admin_SSR||[]).push([[134,443],{8134:(P,C,a)=>{a.r(C),a.d(C,{PageModule:()=>_});var s=a(177),u=a(3487),h=a(6052),c=a(1583),f=a(1635),v=a(6349),r=a(3397),t=a(4438),b=a(67),l=a(628),m=a(4484),I=a(3955);const M=()=>["/page/create"];function $(o,e){1&o&&(t.j41(0,"div",3)(1,"a",4),t.nrm(2,"i",5),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&o&&(t.R7$(),t.Y8G("routerLink",t.lJ4(4,M)),t.R7$(2),t.SpI(" ",t.bMT(4,2,"add_page")," "))}class F{constructor(e,n){this.store=e,this.router=n,this.tableConfig={columns:[{title:"No.",dataField:"no",type:"no"},{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"page.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"page.destroy"}],data:[],total:0}}ngOnInit(){this.page$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new r.TV(e))}onActionClicked(e){"edit"==e.actionToPerform?this.edit(e.data):"status"==e.actionToPerform?this.status(e.data):"delete"==e.actionToPerform?this.delete(e.data):"deleteAll"==e.actionToPerform&&this.deleteAll(e.data)}edit(e){this.router.navigateByUrl(`/page/edit/${e.id}`)}status(e){this.store.dispatch(new r.Nw(e.id,e.status))}delete(e){this.store.dispatch(new r.tW(e.id))}deleteAll(e){this.store.dispatch(new r.OD(e))}static{this.\u0275fac=function(n){return new(n||F)(t.rXU(u.il),t.rXU(c.Ix))}}static{this.\u0275cmp=t.VBU({type:F,selectors:[["app-page"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(n,i){1&n&&(t.j41(0,"app-page-wrapper",0),t.DNE(1,$,5,5,"div",1),t.j41(2,"app-table",2),t.bIt("tableChanged",function(g){return i.onTableChange(g)})("rowClicked",function(g){return i.edit(g)})("action",function(g){return i.onActionClicked(g)}),t.k0s()()),2&n&&(t.Y8G("gridClass","col-sm-12")("title","pages"),t.R7$(),t.Y8G("hasPermission","page.create"),t.R7$(),t.Y8G("tableConfig",i.tableConfig)("hasCheckbox",!0))},dependencies:[c.Wk,b.O,l.k,m.p,I.D9]})}}(0,f.Cg)([(0,u.l6)(v.j.page)],F.prototype,"page$",void 0);var d=a(9417),R=a(1413),E=a(7673),j=a(5558),A=a(1397),G=a(6977),D=a(5859),Y=a(7539),U=a(1005);function O(o,e){1&o&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"title_is_required")," "))}class y{constructor(e,n,i,p){this.store=e,this.route=n,this.router=i,this.formBuilder=p,this.html="",this.destroy$=new R.B,this.form=this.formBuilder.group({title:new d.MJ("",[d.k0.required]),content:new d.MJ,meta_title:new d.MJ,meta_description:new d.MJ,page_meta_image_id:new d.MJ,status:new d.MJ(1)})}ngOnInit(){this.route.params.pipe((0,j.n)(e=>e.id?this.store.dispatch(new r.oe(e.id)).pipe((0,A.Z)(()=>this.store.select(v.j.selectedPage))):(0,E.of)()),(0,G.Q)(this.destroy$)).subscribe(e=>{this.id=e?.id,this.form.patchValue({title:e?.title,content:e?.content,meta_title:e?.meta_title,meta_description:e?.meta_description,status:e?.status})}),this.editor=new h.KE}selectMetaImage(e){Array.isArray(e)||this.form.controls.page_meta_image_id.setValue(e?e.id:null)}submit(){this.form.markAllAsTouched();let e=new r.mv(this.form.value);"edit"==this.type&&this.id&&(e=new r.lt(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/page")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(n){return new(n||y)(t.rXU(u.il),t.rXU(c.nX),t.rXU(c.Ix),t.rXU(d.ok))}}static{this.\u0275cmp=t.VBU({type:y,selectors:[["app-form-page"]],inputs:{type:"type"},decls:26,vars:42,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"custom-editor"],[3,"editor"],["formControlName","content",3,"editor","ngModel","disabled","placeholder"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","multipleImage","image"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"]],template:function(n,i){if(1&n&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return i.submit()}),t.j41(1,"app-form-fields",1),t.nrm(2,"input",2),t.nI1(3,"translate"),t.DNE(4,O,3,3,"div",3),t.k0s(),t.j41(5,"app-form-fields",1)(6,"div",4),t.nrm(7,"ngx-editor-menu",5)(8,"ngx-editor",6),t.k0s()(),t.j41(9,"app-form-fields",1),t.nrm(10,"input",7),t.nI1(11,"translate"),t.k0s(),t.j41(12,"app-form-fields",1),t.nrm(13,"textarea",8),t.nI1(14,"translate"),t.k0s(),t.j41(15,"app-form-fields",1)(16,"app-image-upload",9),t.nI1(17,"async"),t.bIt("selectedFiles",function(g){return i.selectMetaImage(g)}),t.k0s()(),t.j41(18,"app-form-fields",1)(19,"div",10)(20,"label",11),t.nrm(21,"input",12)(22,"span",13),t.k0s()()(),t.j41(23,"app-button",14),t.EFF(24),t.nI1(25,"translate"),t.k0s()()),2&n){let p;t.Y8G("formGroup",i.form),t.R7$(),t.Y8G("label","title")("for","title")("required",!0),t.R7$(),t.FS9("placeholder",t.bMT(3,32,"enter_title")),t.R7$(2),t.Y8G("ngIf",i.form.controls.title.touched&&(null==i.form.controls.title.errors?null:i.form.controls.title.errors.required)),t.R7$(),t.Y8G("label","content")("for","content")("required",!1),t.R7$(2),t.Y8G("editor",i.editor),t.R7$(),t.Y8G("editor",i.editor)("ngModel",i.html)("disabled",!1)("placeholder","Type here..."),t.R7$(),t.Y8G("label","meta_title")("for","metatitle")("required",!1),t.R7$(),t.FS9("placeholder",t.bMT(11,34,"enter_meta_title")),t.R7$(2),t.Y8G("label","meta_description")("for","desc")("required",!1),t.R7$(),t.FS9("placeholder",t.bMT(14,36,"enter_meta_description")),t.R7$(2),t.Y8G("label","meta_image")("for","meta_image")("required",!1),t.R7$(),t.Y8G("multipleImage",!1)("image",null==(p=t.bMT(17,38,i.page$))?null:p.page_meta_image),t.R7$(2),t.Y8G("label","Status")("for","status")("required",!1),t.R7$(5),t.Y8G("id","page_btn"),t.R7$(),t.SpI(" ",t.bMT(25,40,"create"==i.type?"save_page":"update_page")," ")}},dependencies:[s.bT,d.qT,d.me,d.Zm,d.BC,d.cb,d.j4,d.JD,D.z,Y.W,U.Q,h.Cl,h.Zu,s.Jj,I.D9]})}}(0,f.Cg)([(0,u.l6)(v.j.selectedPage)],y.prototype,"page$",void 0);let S=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-create-page"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,p){1&i&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-page",1),t.k0s()),2&i&&(t.Y8G("title","create_page"),t.R7$(),t.Y8G("type","create"))},dependencies:[l.k,y]})}}return o})(),B=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-edit-page"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,p){1&i&&(t.j41(0,"app-page-wrapper",0),t.nrm(1,"app-form-page",1),t.k0s()),2&i&&(t.Y8G("title","update_page"),t.R7$(),t.Y8G("type","edit"))},dependencies:[l.k,y]})}}return o})();var T=a(8745);const k=[{path:"",component:F,canActivate:[T.L],data:{permission:"page.index"}},{path:"create",component:S,canActivate:[T.L],data:{permission:["page.index","page.create"]}},{path:"edit/:id",component:B,canActivate:[T.L],data:{permission:["page.index","page.edit"]}}];let w=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[c.iI.forChild(k),c.iI]})}}return o})();var L=a(1592);let _=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[s.MD,w,L.G,u.rK.forFeature([v.j]),h.VZ]})}}return o})()},8745:(P,C,a)=>{a.d(C,{L:()=>c});var s=a(4438),u=a(3487),h=a(1583);let c=(()=>{class f{constructor(r,t){this.store=r,this.router=t}canActivate(r,t){const b=this.store.selectSnapshot(m=>m.account).permissions?.map(m=>m?.name),l=r.data?.permission;return!!(!l||!Array.isArray(l)&&b?.includes(l)||Array.isArray(l)&&l?.length&&l.every(m=>b?.includes(m)))||(this.router.navigate(["/error/403"]),!1)}static{this.\u0275fac=function(t){return new(t||f)(s.KVO(u.il),s.KVO(h.Ix))}}static{this.\u0275prov=s.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},5859:(P,C,a)=>{a.d(C,{z:()=>v});var s=a(4438),u=a(177),h=a(3955);const c=["*"];function f(r,t){1&r&&(s.j41(0,"span",1),s.EFF(1,"*"),s.k0s())}let v=(()=>{class r{constructor(){this.class="mb-4 row align-items-center g-2",this.labelClass="form-label-title col-sm-2 mb-0",this.gridClass="col-sm-10"}static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275cmp=s.VBU({type:r,selectors:[["app-form-fields"]],inputs:{class:"class",label:"label",labelClass:"labelClass",gridClass:"gridClass",for:"for",required:"required"},ngContentSelectors:c,decls:7,vars:11,consts:[["class","theme-color ms-2 required-dot",4,"ngIf"],[1,"theme-color","ms-2","required-dot"]],template:function(l,m){1&l&&(s.NAR(),s.j41(0,"div")(1,"label"),s.EFF(2),s.nI1(3,"translate"),s.DNE(4,f,2,0,"span",0),s.k0s(),s.j41(5,"div"),s.SdG(6),s.k0s()()),2&l&&(s.HbH(m.class),s.R7$(),s.HbH(m.labelClass),s.BMQ("for",m.for),s.R7$(),s.SpI(" ",s.bMT(3,9,m.label),""),s.R7$(2),s.Y8G("ngIf",m.required),s.R7$(),s.HbH(m.gridClass))},dependencies:[u.bT,h.D9]})}}return r})()}}]);